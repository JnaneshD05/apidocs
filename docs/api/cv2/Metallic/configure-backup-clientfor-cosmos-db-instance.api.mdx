---
id: configure-backup-clientfor-cosmos-db-instance
title: "Configure Backup Client for CosmosDB Instance"
description: "This API creates a Cosmos Cloud DB Instance on metallic azure."
sidebar_label: "Configure Backup Client for CosmosDB Instance"
hide_title: true
hide_table_of_contents: true
api: {"tags":["CosmosDB"],"description":"This API creates a Cosmos Cloud DB Instance on metallic azure.\n\nCloud DB Content is optional . If not provided all containers in the DB are backed up.\n\n#### Request Body\n\n| **Field** | **Description** | **Type** | **Required** | **Notes** |\n| --- | --- | --- | --- | --- |\n| cloudAccount | cloud account name or id | integer (id) , string (name) | True |  |\n| region | region id | integer | True |  |\n| plan | plan name or id | integer (id) , string (name) | True |  |\n| backupGateways | backup gateway name or id | integer (id) , string (name) | True |  |\n| cloudDBContent | cloud DB content to be backed up | array | False | Payload contains the Array of the contents of the Cosmos DB that should be explicitly backed up. We get this from cloudDBContentPreview API for COSMOS DB. |\n\n#### Response Body\n\n| **Field** | **Description** | **Type** | **Notes** |\n| --- | --- | --- | --- |\n| id | newly created instance name | integer |  |\n| name | newly created instance id | string |  |","operationId":"ConfigureBackupClientforCosmosDBInstance","parameters":[],"requestBody":{"description":"","content":{"application/json":{"schema":{"type":"object","x-examples":{"Example 1":{"cloudAccount":{"id":2034,"name":"new_cloudaccount_test7"},"region":{"id":9},"plan":{"id":1638},"backupGateways":[{"id":1898,"name":"azmetallic5-MI-790422ef-cd2c-44a9-aaf6-c8a7b93ab941"}],"cloudDBContent":{"children":[{"path":"doshinsky-cosmos-1","displayName":"CosTestDB","name":"CosTestDB","type":44,"value":"eastus"}]}}},"properties":{"cloudAccount":{"type":"object","description":"cloud account name or id\t","properties":{"id":{"type":"integer"},"name":{"type":"string"}}},"region":{"type":"object","description":"region id\t","properties":{"id":{"type":"integer"},"name":{"type":"string"},"":{"type":"string"}}},"plan":{"type":"object","description":"plan name or id\t","properties":{"id":{"type":"integer"},"name":{"type":"string"}}},"backupGateways":{"type":"array","items":{"type":"object","properties":{"id":{"type":"integer"},"name":{"type":"string"}}}},"cloudDBContent":{"type":"object","description":"cloud DB content to be backed up. Payload contains the Array of the contents of the Cosmos DB that should be explicitly backed up. We get this from cloudDBContentPreview API for COSMOS DB.","properties":{"children":{"type":"array","items":{"type":"object","properties":{"path":{"type":"string"},"displayName":{"type":"string"},"name":{"type":"string"},"type":{"type":"integer"},"value":{"type":"string"}}}}}}},"required":["cloudAccount","region","plan","backupGateways"]},"example":"{\n\n    \"cloudAccount\": {\n\n        \"id\": {{cloudAccountId}},\n\n        \"name\": \"{{cloudAccountName}}\"\n\n    },\n\n    \"region\": {\n\n        \"id\": {{regionId}}\n\n    },\n\n    \"plan\": {\n\n        \"id\": {{planId}},\n\n        \"name\": \"{{planName}}\"\n\n    },\n\n    \"backupGateways\": [\n\n        {\n\n            \"id\": {{backupGatewayId}},\n\n            \"name\": \"{{backupGatewayName}}\"\n\n        },\n\n        {\n\n            \"id\": {{backupGatewayId}},\n\n            \"name\": \"{{backupGatewayName}}\"\n\n        }\n\n    ],\n\n    \"cloudDBContent\": {\n\n        \"children\": [\n\n            {\n\n                \"path\": \"\",\n\n                \"displayName\": \"\",\n\n                \"name\": \"\",\n\n                \"type\": null,\n\n                \"value\": \"\"\n\n            }\n\n        ]\n\n    }\n\n}","examples":{"Configure Backup Client for CosmosDB Instance":{"value":{"cloudAccount":{"id":2034,"name":"new_cloudaccount_test7"},"region":{"id":9},"plan":{"id":1638},"backupGateways":[{"id":1898,"name":"azmetallic5-MI-790422ef-cd2c-44a9-aaf6-c8a7b93ab941"},{"id":1898,"name":"azmetallic5-MI-790422ef-cd2c-44a9-aaf6-c8a7b93ab941"}]}},"Configure Backup Client for CosmosDB Instance with cloudDBContent":{"value":{"cloudAccount":{"id":2034,"name":"new_cloudaccount_test7"},"region":{"id":9},"plan":{"id":1638},"backupGateways":[{"id":1898,"name":"azmetallic5-MI-790422ef-cd2c-44a9-aaf6-c8a7b93ab941"}],"cloudDBContent":{"children":[{"path":"doshinsky-cosmos-1","displayName":"CosTestDB","name":"CosTestDB","type":44,"value":"eastus"}]}}}}}},"required":true},"responses":{"200":{"description":"OK","content":{"application/json;charset=utf-8":{"schema":{"allOf":[{"title":"ConfigureBackupClientforCosmosDBInstance","required":["instance"],"type":"object","properties":{"instance":{"title":"Instance2","required":["id","name"],"type":"object","properties":{"id":{"type":"integer","format":"int32"},"name":{"type":"string"}},"example":{"id":1752,"name":"SQL API [eastus]"}}},"example":{"instance":{"id":1752,"name":"SQL API [eastus]"}}},{"example":{"instance":{"id":1752,"name":"SQL API [eastus]"}}}]},"example":{"instance":{"id":1752,"name":"SQL API [eastus]"}},"examples":{"Configure Backup Client for CosmosDB Instance":{"value":{"instance":{"id":1752,"name":"SQL API [eastus]"}}}}}}},"500":{"description":"Internal Server Error","content":{"application/json":{"schema":{"allOf":[{"title":"ConfigureBackupClientforCosmosDBInstancewheninstancealreadyexists1","required":["errorMessage","errorCode","entity"],"type":"object","properties":{"errorMessage":{"type":"string"},"errorCode":{"type":"integer","format":"int32"},"entity":{"title":"Entity","required":["subclientId","clientId","instanceName","instanceId","_type_"],"type":"object","properties":{"subclientId":{"type":"integer","format":"int32"},"clientId":{"type":"integer","format":"int32"},"instanceName":{"type":"string"},"instanceId":{"type":"integer","format":"int32"},"_type_":{"type":"integer","format":"int32"}},"example":{"subclientId":0,"clientId":2038,"instanceName":"sqlami-eastus.0b6ca3d85c3b.database.windows.net","instanceId":-1,"_type_":0}}},"example":{"errorMessage":"An instance by this name already exists.","errorCode":3,"entity":{"subclientId":0,"clientId":2038,"instanceName":"sqlami-eastus.0b6ca3d85c3b.database.windows.net","instanceId":-1,"_type_":0}}},{"example":{"errorMessage":"An instance by this name already exists.","errorCode":3,"entity":{"subclientId":0,"clientId":2038,"instanceName":"sqlami-eastus.0b6ca3d85c3b.database.windows.net","instanceId":-1,"_type_":0}}}]},"example":{"errorMessage":"An instance by this name already exists.","errorCode":3,"entity":{"subclientId":0,"clientId":2038,"instanceName":"sqlami-eastus.0b6ca3d85c3b.database.windows.net","instanceId":-1,"_type_":0}}}}}},"deprecated":false,"method":"post","path":"/core/azuredb/cosmos/instance","servers":[{"url":"https://api.metallic.io/api/v1","variables":{}}],"security":[{"bearer":[]}],"securitySchemes":{"bearer":{"type":"http","scheme":"bearer"}},"jsonRequestBodyExample":{"cloudAccount":{"id":0,"name":"string"},"region":{"id":0,"name":"string","":"string"},"plan":{"id":0,"name":"string"},"backupGateways":[{"id":0,"name":"string"}],"cloudDBContent":{"children":[{"path":"string","displayName":"string","name":"string","type":0,"value":"string"}]}},"info":{"title":"Metallic REST API Reference","description":"This API documentation covers all the APIs exposed by metallic for all the partner customers as well as standalone customers.\n\n> Invoke Authentication - `/api/v1/authenticate` API using `username` and `password` provided by metallic to obtain `authToken`. All subsequent requests should pass `authToken` obtained as `Bearer token` as part of `Authorization` header.\n\n> Contact Metallic Customer support for any further assistance.\n\n## HTTP Codes\n\nFollowing are the generic HTTP codes returned by APIs. These HTTP codes are not documented again at each API level to improve the overall documentation readability.\n\n| **HTTP Error Code** | **Description** |\n| --- | --- |\n| 200 | OK - Success |\n| 201 | Created - Record created successfully |\n| 204 | Success No Content -Usually returned for DELETE operation response. |\n| 400 | Bad Request - Correct the request and resubmit. |\n| 401 | Unauthorized - Authentication Failed. User credentials are incorrect or authToken is incorrect/expired. |\n| 403 | Forbidden - Logged in user does not have permission to requested API. |\n| 404 | Not Found - No records found matching the request. |\n| 409 | Conflict - In case of business errors where resource can not be created/updated due to conflict. |\n| 429 | Too Many Requests - API invocation quota exceeded. |\n| 500 | Internal Server Error - Unexpected error from server. Something went wrong on server. |","contact":{},"version":"1.0"},"postman":{"name":"Configure Backup Client for CosmosDB Instance","description":{"content":"This API creates a Cosmos Cloud DB Instance on metallic azure.\n\nCloud DB Content is optional . If not provided all containers in the DB are backed up.\n\n#### Request Body\n\n| **Field** | **Description** | **Type** | **Required** | **Notes** |\n| --- | --- | --- | --- | --- |\n| cloudAccount | cloud account name or id | integer (id) , string (name) | True |  |\n| region | region id | integer | True |  |\n| plan | plan name or id | integer (id) , string (name) | True |  |\n| backupGateways | backup gateway name or id | integer (id) , string (name) | True |  |\n| cloudDBContent | cloud DB content to be backed up | array | False | Payload contains the Array of the contents of the Cosmos DB that should be explicitly backed up. We get this from cloudDBContentPreview API for COSMOS DB. |\n\n#### Response Body\n\n| **Field** | **Description** | **Type** | **Notes** |\n| --- | --- | --- | --- |\n| id | newly created instance name | integer |  |\n| name | newly created instance id | string |  |","type":"text/plain"},"url":{"path":["core","azuredb","cosmos","instance"],"host":["{{baseUrl}}"],"query":[],"variable":[]},"header":[{"key":"Content-Type","value":"application/json"},{"key":"Accept","value":"application/json;charset=utf-8"}],"method":"POST","body":{"mode":"raw","raw":"\"\"","options":{"raw":{"language":"json"}}}}}
sidebar_class_name: "post api-method"
info_path: docs/api/cv2/Metallic/metallic-rest-api-reference
custom_edit_url: null
---

import ApiTabs from "@theme/ApiTabs";
import MimeTabs from "@theme/MimeTabs";
import ParamsItem from "@theme/ParamsItem";
import ResponseSamples from "@theme/ResponseSamples";
import SchemaItem from "@theme/SchemaItem";
import SchemaTabs from "@theme/SchemaTabs";
import DiscriminatorTabs from "@theme/DiscriminatorTabs";
import TabItem from "@theme/TabItem";

## Configure Backup Client for CosmosDB Instance



This API creates a Cosmos Cloud DB Instance on metallic azure.

Cloud DB Content is optional . If not provided all containers in the DB are backed up.

#### Request Body

| **Field** | **Description** | **Type** | **Required** | **Notes** |
| --- | --- | --- | --- | --- |
| cloudAccount | cloud account name or id | integer (id) , string (name) | True |  |
| region | region id | integer | True |  |
| plan | plan name or id | integer (id) , string (name) | True |  |
| backupGateways | backup gateway name or id | integer (id) , string (name) | True |  |
| cloudDBContent | cloud DB content to be backed up | array | False | Payload contains the Array of the contents of the Cosmos DB that should be explicitly backed up. We get this from cloudDBContentPreview API for COSMOS DB. |

#### Response Body

| **Field** | **Description** | **Type** | **Notes** |
| --- | --- | --- | --- |
| id | newly created instance name | integer |  |
| name | newly created instance id | string |  |

<MimeTabs><TabItem label={"application/json"} value={"application/json-schema"}><details style={{}} data-collapsed={false} open={true}><summary style={{"textAlign":"left"}}><strong>Request Body</strong><strong style={{"fontSize":"var(--ifm-code-font-size)","color":"var(--openapi-required)"}}> required</strong></summary><div style={{"textAlign":"left","marginLeft":"1rem"}}></div><ul style={{"marginLeft":"1rem"}}><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}}><summary style={{}}><strong>cloudAccount</strong><span style={{"opacity":"0.6"}}> object</span><strong style={{"fontSize":"var(--ifm-code-font-size)","color":"var(--openapi-required)"}}> required</strong></summary><div style={{"marginLeft":"1rem"}}><div style={{"marginTop":".5rem","marginBottom":".5rem"}}>

cloud account name or id	

</div><SchemaItem collapsible={false} name={"id"} required={false} deprecated={undefined} schemaDescription={undefined} schemaName={"integer"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem><SchemaItem collapsible={false} name={"name"} required={false} deprecated={undefined} schemaDescription={undefined} schemaName={"string"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem></div></details></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}}><summary style={{}}><strong>region</strong><span style={{"opacity":"0.6"}}> object</span><strong style={{"fontSize":"var(--ifm-code-font-size)","color":"var(--openapi-required)"}}> required</strong></summary><div style={{"marginLeft":"1rem"}}><div style={{"marginTop":".5rem","marginBottom":".5rem"}}>

region id	

</div><SchemaItem collapsible={false} name={"id"} required={false} deprecated={undefined} schemaDescription={undefined} schemaName={"integer"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem><SchemaItem collapsible={false} name={"name"} required={false} deprecated={undefined} schemaDescription={undefined} schemaName={"string"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem><SchemaItem collapsible={false} name={""} required={false} deprecated={undefined} schemaDescription={undefined} schemaName={"string"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem></div></details></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}}><summary style={{}}><strong>plan</strong><span style={{"opacity":"0.6"}}> object</span><strong style={{"fontSize":"var(--ifm-code-font-size)","color":"var(--openapi-required)"}}> required</strong></summary><div style={{"marginLeft":"1rem"}}><div style={{"marginTop":".5rem","marginBottom":".5rem"}}>

plan name or id	

</div><SchemaItem collapsible={false} name={"id"} required={false} deprecated={undefined} schemaDescription={undefined} schemaName={"integer"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem><SchemaItem collapsible={false} name={"name"} required={false} deprecated={undefined} schemaDescription={undefined} schemaName={"string"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem></div></details></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}}><summary style={{}}><strong>backupGateways</strong><span style={{"opacity":"0.6"}}> object[]</span><strong style={{"fontSize":"var(--ifm-code-font-size)","color":"var(--openapi-required)"}}> required</strong></summary><div style={{"marginLeft":"1rem"}}><SchemaItem collapsible={false} name={"id"} required={false} deprecated={undefined} schemaDescription={undefined} schemaName={"integer"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem><SchemaItem collapsible={false} name={"name"} required={false} deprecated={undefined} schemaDescription={undefined} schemaName={"string"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem></div></details></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}}><summary style={{}}><strong>cloudDBContent</strong><span style={{"opacity":"0.6"}}> object</span></summary><div style={{"marginLeft":"1rem"}}><div style={{"marginTop":".5rem","marginBottom":".5rem"}}>

cloud DB content to be backed up. Payload contains the Array of the contents of the Cosmos DB that should be explicitly backed up. We get this from cloudDBContentPreview API for COSMOS DB.

</div><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}}><summary style={{}}><strong>children</strong><span style={{"opacity":"0.6"}}> object[]</span></summary><div style={{"marginLeft":"1rem"}}><SchemaItem collapsible={false} name={"path"} required={false} deprecated={undefined} schemaDescription={undefined} schemaName={"string"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem><SchemaItem collapsible={false} name={"displayName"} required={false} deprecated={undefined} schemaDescription={undefined} schemaName={"string"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem><SchemaItem collapsible={false} name={"name"} required={false} deprecated={undefined} schemaDescription={undefined} schemaName={"string"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem><SchemaItem collapsible={false} name={"type"} required={false} deprecated={undefined} schemaDescription={undefined} schemaName={"integer"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem><SchemaItem collapsible={false} name={"value"} required={false} deprecated={undefined} schemaDescription={undefined} schemaName={"string"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem></div></details></SchemaItem></div></details></SchemaItem></ul></details></TabItem></MimeTabs><div><ApiTabs><TabItem label={"200"} value={"200"}><div>

OK

</div><div><MimeTabs schemaType={"response"}><TabItem label={"application/json;charset=utf-8"} value={"application/json;charset=utf-8"}><SchemaTabs><TabItem label={"Schema"} value={"Schema"}><details style={{}} data-collapsed={false} open={true}><summary style={{"textAlign":"left"}}><strong>Schema</strong></summary><div style={{"textAlign":"left","marginLeft":"1rem"}}></div><ul style={{"marginLeft":"1rem"}}><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}}><summary style={{}}><strong>instance</strong><span style={{"opacity":"0.6"}}> object</span></summary><div style={{"marginLeft":"1rem"}}><SchemaItem collapsible={false} name={"id"} required={false} deprecated={undefined} schemaDescription={undefined} schemaName={"int32"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem><SchemaItem collapsible={false} name={"name"} required={false} deprecated={undefined} schemaDescription={undefined} schemaName={"string"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem></div></details></SchemaItem></ul></details></TabItem><TabItem label={"Example (from schema)"} value={"Example (from schema)"}><ResponseSamples responseExample={"{\n  \"instance\": {\n    \"id\": 1752,\n    \"name\": \"SQL API [eastus]\"\n  }\n}"} language={"json"}></ResponseSamples></TabItem><TabItem label={" Configure  Backup  Client for  Cosmos D B  Instance"} value={" Configure  Backup  Client for  Cosmos D B  Instance"}><ResponseSamples responseExample={"{\n  \"instance\": {\n    \"id\": 1752,\n    \"name\": \"SQL API [eastus]\"\n  }\n}"} language={"shell"}></ResponseSamples></TabItem><TabItem label={"Example"} value={"Example"}><ResponseSamples responseExample={"{\n  \"instance\": {\n    \"id\": 1752,\n    \"name\": \"SQL API [eastus]\"\n  }\n}"} language={"shell"}></ResponseSamples></TabItem></SchemaTabs></TabItem></MimeTabs></div></TabItem><TabItem label={"500"} value={"500"}><div>

Internal Server Error

</div><div><MimeTabs schemaType={"response"}><TabItem label={"application/json"} value={"application/json"}><SchemaTabs><TabItem label={"Schema"} value={"Schema"}><details style={{}} data-collapsed={false} open={true}><summary style={{"textAlign":"left"}}><strong>Schema</strong></summary><div style={{"textAlign":"left","marginLeft":"1rem"}}></div><ul style={{"marginLeft":"1rem"}}><SchemaItem collapsible={false} name={"errorMessage"} required={false} deprecated={undefined} schemaDescription={undefined} schemaName={"string"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem><SchemaItem collapsible={false} name={"errorCode"} required={false} deprecated={undefined} schemaDescription={undefined} schemaName={"int32"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}}><summary style={{}}><strong>entity</strong><span style={{"opacity":"0.6"}}> object</span></summary><div style={{"marginLeft":"1rem"}}><SchemaItem collapsible={false} name={"subclientId"} required={false} deprecated={undefined} schemaDescription={undefined} schemaName={"int32"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem><SchemaItem collapsible={false} name={"clientId"} required={false} deprecated={undefined} schemaDescription={undefined} schemaName={"int32"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem><SchemaItem collapsible={false} name={"instanceName"} required={false} deprecated={undefined} schemaDescription={undefined} schemaName={"string"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem><SchemaItem collapsible={false} name={"instanceId"} required={false} deprecated={undefined} schemaDescription={undefined} schemaName={"int32"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem><SchemaItem collapsible={false} name={"_type_"} required={false} deprecated={undefined} schemaDescription={undefined} schemaName={"int32"} qualifierMessage={undefined} defaultValue={undefined}></SchemaItem></div></details></SchemaItem></ul></details></TabItem><TabItem label={"Example (from schema)"} value={"Example (from schema)"}><ResponseSamples responseExample={"{\n  \"errorMessage\": \"An instance by this name already exists.\",\n  \"errorCode\": 3,\n  \"entity\": {\n    \"subclientId\": 0,\n    \"clientId\": 2038,\n    \"instanceName\": \"sqlami-eastus.0b6ca3d85c3b.database.windows.net\",\n    \"instanceId\": -1,\n    \"_type_\": 0\n  }\n}"} language={"json"}></ResponseSamples></TabItem><TabItem label={"Example"} value={"Example"}><ResponseSamples responseExample={"{\n  \"errorMessage\": \"An instance by this name already exists.\",\n  \"errorCode\": 3,\n  \"entity\": {\n    \"subclientId\": 0,\n    \"clientId\": 2038,\n    \"instanceName\": \"sqlami-eastus.0b6ca3d85c3b.database.windows.net\",\n    \"instanceId\": -1,\n    \"_type_\": 0\n  }\n}"} language={"json"}></ResponseSamples></TabItem></SchemaTabs></TabItem></MimeTabs></div></TabItem></ApiTabs></div>
      